# Medication Mapping

## XML HL7 > JSON FHIR

A GP Connect FHIR `Medication` is mapped from an GP2GP HL7v3 `MedicationStatement`.

| Mapped to (JSON FHIR Encounter field) | Mapped from (XML HL7 / other source)                                                                                                                                                                                                       |
|---------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| id                                    | Generated by the adaptor (not linked to the MedicationStatement).                                                                                                                                                                          |
| meta.profile\[0]                      | fixed value = `"https://fhir.nhs.uk/STU3/StructureDefinition/CareConnect-GPC-Medication-1"`                                                                                                                                                |
| code.coding\[0].system                | fixed value = `http://snomed.info/sct`                                                                                                                                                                                                     |
| code.coding\[0].code                  | `MedicationStatement / consumable / manufacturedProduct / manufacturedMaterial / code [@code]`.<br/>If the code is not a SNOMED code then the adaptor will insert code = 196421000000109 and display = Transfer-degraded medication entry. |
| code.coding\[0].display               | `MedicationStatement / consumable / manufacturedProduct / manufacturedMaterial / code [@displayName]`                                                                                                                                      |

<details>
    <summary>Example JSON</summary>

```
            "resource": {
                "resourceType": "Medication",
                "id": "4c6a99eb-fabb-4e92-809c-b738dc9a114d",
                "meta": {
                    "profile": [
                        "https://fhir.nhs.uk/STU3/StructureDefinition/CareConnect-GPC-Medication-1"
                    ]
                },
                "code": {
                    "coding": [
                        {
                            "system": "http://snomed.info/sct",
                            "code": "178011000001104",
                            "display": "Zimovane LS 3.75mg tablets (Sanofi)"
                        }
                    ]
                }

```
</details>

- If a SNOMED CT code cannot be found `code.coding[0]` will not be populated. The adaptor will insert code = 196421000000109 and display = Transfer-degraded medication entry.

### Unmapped fields

`Medication` is a subset of mappings from `MedicationStatement` in the XML and as such doesn't include every field, see here for details:
[https://developer.nhs.uk/apis/gpconnect-1-6-0/accessrecord_structured_development_medication.html](https://developer.nhs.uk/apis/gpconnect-1-6-0/accessrecord_structured_development_medication.html)

## JSON FHIR > XML HL7

A GP2GP HL7v3 `MedicationStatement`is mapped from a GP Connect FHIR `MedicationRequest` and `Medication`.</br>
This is covered and detailed in the mapping for [MedicationStatement](../medication%20statements/README.md)

## Further documentation

[GP Connect Medication](https://developer.nhs.uk/apis/gpconnect-1-6-0/accessrecord_structured_development_medication.html)

[MIM 4.2.00](https://data.developer.nhs.uk/dms/mim/4.2.00/Index.htm)